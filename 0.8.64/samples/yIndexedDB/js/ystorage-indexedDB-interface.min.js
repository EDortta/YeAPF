window._WIDBI_AUTO=-1;window._WIDBI_AS_WORKER=1;window._WIDBI_AS_IFRAME=2;window._WIDBI_AS_INLINE=3;
var yIndexedDBInterfaceObj=function(s,t,m,l){function q(a){_dumpy(128,1,"yIndexedDBInterfaceObj _msgReceiver "+a.data.cmd);switch(a.data.cmd){case "initialization":_dumpy(128,1,"initialization status: "+a.data.information.status);a.data.information.status!=p&&(p=a.data.information.status,"function"==typeof k.onstatuschange&&setTimeout(function(){k.onstatuschange(p)},125));break;case "callback":a=JSON.parse(a.data.information.cbr);for(var b=["callbackId","callbackOnItem","callbackOnComplete"],n=0;n<
b.length;n++){var c=a[b[n]];"object"==typeof d[c]&&(d[c].callback(a),d[c].destroy||a._removeThis)&&("string"==typeof d[c].sibling&&delete d[d[c].sibling],delete d[c])}break;case "log":_dumpy(128,1,a.data.information.message)}}function g(a,b,n){var c=null;if("function"==typeof a){var h={},h={callback:a,destroy:"undefined"==typeof b?!0:b,sibling:n||!1},c=u+generateSmallSessionUniqueId();d[c]=h}return c}l=str2int(l);0>=l&&(l=537>yloader.webKitVersion.split(".")[0]?_WIDBI_AS_IFRAME:_WIDBI_AS_WORKER);
var k={},e,u=newIdentifier(),d=[],p=null,f,v=function(a){var b={count:function(a){e.postMessage({cmd:"count",callbackId:g(a,!0),tableName:b.tableName},f)},setItem:function(a,c,h){e.postMessage({cmd:"setItem",callbackId:g(h,!0),tableName:b.tableName,data:c,keyValue:a},f)},getItem:function(a,c){e.postMessage({cmd:"getItem",callbackId:g(c,!0),tableName:b.tableName,keyValue:a},f)},insertData:function(a,c,h){c=g(c,!1);e.postMessage({cmd:"insertData",tableName:b.tableName,callbackId:c,dataArray:a.slice(),
fieldsToPreserve:h},f)},filter:function(a,c,h,d){a=g(a,!1);e.postMessage({cmd:"filter",tableName:b.tableName,callbackOnItem:a,callbackOnComplete:g(c,!0,a),condition:h,haltOnFirst:d},f)},removeItem:function(a,c){e.postMessage({cmd:"removeItem",callbackId:g(c,!0),tableName:b.tableName,keyValue:a},f)},removeData:function(a,c){e.postMessage({cmd:"removeData",callbackId:g(c,!1),tableName:b.tableName,arrayOfKeys:a},f)},init:function(){b.tableName=a;return b}};return b.init()},r=function(){e.postMessage({cmd:"init",
dbTag:s,dbVersion:t,objectStoreDescription:m},f);for(var a=0;a<m.length;a++)"undefined"==typeof k[m[a].name]&&(k[m[a].name]=v(m[a].name))};k.init=function(){getScriptName=function(){for(var a=document.getElementsByTagName("script"),b=0,d="";b<a.length;){var e=a[b].src;0<=e.indexOf("ystorage-indexedDB-interface")&&(d=e);b++}return d};var a=-1<getScriptName().indexOf(".min.js"),b=a?"ystorage-indexedDB-slave.min.js":"ystorage-indexedDB-slave.js";if(l==_WIDBI_AS_WORKER)e=new Worker("js/{0}".format(b)),
f=[],e.addEventListener("message",q),r();else if(l==_WIDBI_AS_IFRAME){var d=a?"yloader.min.js":"yloader.js",a=document.createElement("iframe"),b="<script src='js/{1}'>\x3c/script>\n<script src='js/{0}'>\x3c/script>".format(b,d);a.frameborder=0;a.height=0;a.width=0;a.style="width:0;height:0;border:0; border:none;display: none;";document.body.appendChild(a);a.contentWindow.document.open();a.contentWindow.document.write(b);a.contentWindow.document.close();a.name="ifc_indexedDB";e=a.contentWindow;window.addEventListener("message",
q,!1);f="*";a.onload=function(){r()}}return k};return k.init()};
