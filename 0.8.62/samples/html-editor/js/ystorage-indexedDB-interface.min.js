window._WIDBI_AUTO=-1;window._WIDBI_AS_WORKER=1;window._WIDBI_AS_IFRAME=2;window._WIDBI_AS_INLINE=3;
var yIndexedDBInterfaceObj=function(r,s,l,k){function p(a){_dumpy(128,1,"yIndexedDBInterfaceObj _msgReceiver "+a.data.cmd);switch(a.data.cmd){case "initialization":_dumpy(128,1,"initialization status: "+a.data.information.status);a.data.information.status!=n&&(n=a.data.information.status,"function"==typeof g.onstatuschange&&setTimeout(function(){g.onstatuschange(n)},125));break;case "callback":a=JSON.parse(a.data.information.cbr);for(var c=["callbackId","callbackOnItem","callbackOnComplete"],m=0;m<
c.length;m++){var b=a[c[m]];"object"==typeof d[b]&&(d[b].callback(a),d[b].destroy||a._removeThis)&&("string"==typeof d[b].sibling&&delete d[d[b].sibling],delete d[b])}break;case "log":_dumpy(128,1,a.data.information.message)}}function h(a,c,m){var b=null;if("function"==typeof a){var e={},e={callback:a,destroy:"undefined"==typeof c?!0:c,sibling:m||!1},b=t+generateSmallSessionUniqueId();d[b]=e}return b}k=str2int(k);0>=k&&(k=537>yloader.webKitVersion.split(".")[0]?_WIDBI_AS_IFRAME:_WIDBI_AS_WORKER);
var g={},e,t=newIdentifier(),d=[],n=null,f,u=function(a){var c={count:function(a){e.postMessage({cmd:"count",callbackId:h(a,!0),tableName:c.tableName},f)},setItem:function(a,b,d){e.postMessage({cmd:"setItem",callbackId:h(d,!0),tableName:c.tableName,data:b,keyValue:a},f)},getItem:function(a,b){e.postMessage({cmd:"getItem",callbackId:h(b,!0),tableName:c.tableName,keyValue:a},f)},insertData:function(a,b,d){b=h(b,!1);e.postMessage({cmd:"insertData",tableName:c.tableName,callbackId:b,dataArray:a.slice(),
fieldsToPreserve:d},f)},filter:function(a,b,d,g){a=h(a,!1);e.postMessage({cmd:"filter",tableName:c.tableName,callbackOnItem:a,callbackOnComplete:h(b,!0,a),condition:d,haltOnFirst:g},f)},removeItem:function(a,b){e.postMessage({cmd:"removeItem",callbackId:h(b,!0),tableName:c.tableName,keyValue:a},f)},removeData:function(a,b){e.postMessage({cmd:"removeData",callbackId:h(b,!1),tableName:c.tableName,arrayOfKeys:a},f)},init:function(){c.tableName=a;return c}};return c.init()},q=function(){e.postMessage({cmd:"init",
dbTag:r,dbVersion:s,objectStoreDescription:l},f);for(var a=0;a<l.length;a++)"undefined"==typeof g[l[a].name]&&(g[l[a].name]=u(l[a].name))};g.init=function(){if(k==_WIDBI_AS_WORKER)e=new Worker("js/ystorage-indexedDB-slave.js"),f=[],e.addEventListener("message",p),q();else if(k==_WIDBI_AS_IFRAME){var a=document.createElement("iframe");a.frameborder=0;a.height=0;a.width=0;a.style="width:0;height:0;border:0; border:none;display: none;";document.body.appendChild(a);a.contentWindow.document.open();a.contentWindow.document.write("<script src='js/yloader.js'>\x3c/script>\n<script src='js/ystorage-indexedDB-slave.js'>\x3c/script>");
a.contentWindow.document.close();a.name="ifc_indexedDB";e=a.contentWindow;window.addEventListener("message",p,!1);f="*";a.onload=function(){q()}}return g};return g.init()};
